<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>因子看板</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="聚宽让量化交易的成长之路更为平坦，聚宽让做量化交易的成本极大降低">
    <meta name="keywords" content="因子看板、研究策略、本地数据、量化聚宽">
    <meta name="robots" content="all"/>
    <link rel="shortcut icon" href="../static/favicon.ico"  type="image/x-icon"/>
    <link rel="stylesheet" href="../static/layui/css/layui.css">
    <link rel="stylesheet" href="../static/css/public.css">
    <link rel="stylesheet" href="../static/css/index.css">
    <script src="../static/jquery-1.11.1.min.js"></script>
    <script src="../static/echarts/dist/echarts.min.js"></script>
    <script src="../static/layui/layui.js"></script>
</head>
<body>
<!-- 头部 -->
<div class="head">
  <span class="logo">AI因子看板</span>
  <ul class="layui-nav one">
    <li class="layui-nav-item" onclick="showmodel()">专家信息</li>
    <li class="layui-nav-item" onclick="showmodel()">园区信息</li>
    <li class="layui-nav-item" onclick="showmodel()">自助评级</li>
    <li class="layui-nav-item"><a href="http://ipoipo.cn/" style="padding: 0;color: #ffffff;">行业研究</a></li>
    <li class="layui-nav-item"><a href="https://bigquant.com/wiki/home" style="padding: 0;color: #ffffff;">量化研究</a></li>
    <li class="layui-nav-item">首页</li>
  </ul>
  <ul class="two">
    <li class="layui-nav-item two_li">
      <i class="layui-icon" style="padding: 0 0 0 20px;">&#xe671;</i>
      <dl class="layui-nav-child">
        <dd><a href="javascript:;">首页</a></dd>
        <dd><a href="https://bigquant.com/wiki/home">量化研究</a></dd>
        <dd><a href="http://ipoipo.cn/">行业研究</a></dd>
        <dd><a href="javascript:;" onclick="showmodel()">自助评级</a></dd>
        <dd><a href="javascript:;" onclick="showmodel()">园区信息</a></dd>
        <dd><a href="javascript:;" onclick="showmodel()">专家信息</a></dd>
      </dl>
    </li>
  </ul>
  <div style="clear: both;"></div>
</div>
<div style="height: 70px;"></div>
<script>
  $('.two_li').click(function(){
    $('.two_li dl').toggle()
  })
</script>


<!-- select区 -->
<div class="layui-container" style="width: 100%;">
    <div class="describe">
      <form class="layui-form layui-form-pane" action="" method="post">
        <div class="layui-row">
          <div class="layui-col-md3">
            <div class="layui-form-item">
              <label class="layui-form-label">algo：</label>
              <div class="layui-input-block">
                <select name="algo" lay-verify="required"></select>
              </div>
            </div>
          </div>
          <div class="layui-col-md3">
            <div class="layui-form-item">
              <label class="layui-form-label">freq：</label>
              <div class="layui-input-block">
                <select name="freq" lay-verify="required"></select>
              </div>
            </div>
          </div>
          <div class="layui-col-md3">
            <div class="layui-form-item">
              <label class="layui-form-label">vol：</label>
              <div class="layui-input-block">
                <select name="vol" lay-verify="required"></select>
              </div>
            </div>
          </div>
          <div class="layui-col-md3">
            <div class="layui-form-item">
              <label class="layui-form-label">meta：</label>
              <div class="layui-input-block">
                <select name="meta" lay-verify="required"></select>
              </div>
            </div>
          </div>
          <div class="layui-col-md3">
            <div class="layui-form-item">
              <label class="layui-form-label">end：</label>
              <div class="layui-input-block">
                <select name="end" lay-verify="required"></select>
              </div>
            </div>
          </div>
          <div class="layui-col-md3" style="float: right;">
            <button class="layui-btn" lay-button lay-filter="formDemo" type="button" style="padding: 0 120px;" onclick="FormSub()">确定</button>
          </div>
        </div>
      </form>
  </div>
</div>
<script>
  $.ajax({
    type:'get',
    url:'/initform',
    success:function(data){
      for (const key in data) {
        let _html = '';
        for(var i = 0; i < data[key].length; i++){
          _html+= '<option value="'+data[key][i]+'">'+data[key][i]+'</option>'
        }
        $('select[name='+key+']').html('<option value="no">无</option>'+_html)
      }
    }
  })
</script>




<!-- 因子看板 -->
<div class="layui-container" style="overflow: auto;text-align: right;width: 100%;">
  <table class="layui-table Factor" width="100%" style="margin-bottom: 0;">
    <colgroup>
      <col width="150">
      <col width="200">
      <col>
    </colgroup>
    <thead>
      <tr>
        <th>因子看板</th>
        <th>000009.SZ</th>
        <th>000012.SZ</th>
        <th>000021.SZ</th>
        <th>000027.SZ</th>
        <th>000028.SZ</th>
      </tr> 
    </thead>
    <tbody>
      <tr>
        <td>净利润与营业总收入之比</td>
        <td>-3.64%</td>
        <td>2.13%</td>
        <td>1.60%</td>
        <td>0.96%</td>
        <td>0.015</td>
      </tr>
    </tbody>
  </table>
  <!-- 分页器 -->
  <div style="background-color: #fff;margin-bottom: 20px;text-align: center;">
    <div id="feather_page"></div>
  </div>
</div>

<script>
  layui.use('laypage', function(){
    var laypage = layui.laypage;
    let _html = '';
    $.ajax({
      type:'get',
      url:'/tol_page',
      success:function (data) {
        // console.log(data)
        //执行一个laypage实例
        laypage.render({
          elem: 'feather_page' //注意，这里的 test1 是 ID，不用加 # 号
          ,count: Number(data) //数据总数，从服务端得到
          ,limit:15 //限制煤业条数
          ,jump:function(obj,first){
            // console.log(obj.limit); //得到每页显示的条数
            // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
            $.ajax({
              type:'get',
              data:{"page":obj.curr},
              url:'/page',
              success:function(data){
                data = JSON.parse(data)
                for (const key in data) {
                  var _tdhtml = '';
                  for (const i in data[key]) {
                    _tdhtml += '<td>'+data[key][i]+'</td>'
                  }
                  _html +=  '<tr>'+
                            '<td><a href="/details/'+key+'">'+key+'</a></td>'+
                              _tdhtml+
                            '</tr>'
                }
                $('.Factor tbody').html(_html)
                _html = '';
              },
              error:function (err) {
                layer.msg('出错啦');
              }
            })
          }
        });
      }
    })
  });
  </script>
<script>
  function FormSub(){
    var algo = $('select[name="algo"]').val();
    var freq = $('select[name="freq"]').val();
    var vol = $('select[name="vol"]').val();
    var meta = $('select[name="meta"]').val();
    var end = $('select[name="end"]').val();

    // console.log(algo,freq,vol,meta,end);

    var _html = '';
    $.ajax({
        type:'post',
        url:'/formsub',
        data:{"algo":algo,"freq":freq,"vol":vol,"meta":meta,"end":end},
        success:function(data){
            // console.log(data)
            for (const key in data) {
                  // console.log(key)
                  _html +=  '<tr>'+
                        '<td><a href="/details/'+key+'">'+key+'</a></td>'+
                        '<th>'+data[key][0]+'</th>'+
                        '<th>'+data[key][1]+'</th>'+
                        '<th>'+data[key][2]+'</th>'+
                        '<th>'+data[key][3]+'</th>'+
                        '<th>'+data[key][4]+'</th>'+
                        '</tr>'
            }
            $('.Factor tbody').html(_html)
            _html = '';
        },
        error:function(err){
          layer.msg('出错啦');
        }
    })
  }
</script>



<!-- 图表 -->
<div class="layui-container" style="width: 100%;">
  <div class="table_select">
    <form class="layui-row layui-col-space10 layui-form" action="">
      <div class="layui-col-md4">
        <div class="layui-form-item">
          <label class="layui-form-label">X轴</label>
          <div class="layui-input-block">
            <select name="x_axis" lay-verify="required">
              <option value=""></option>
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
        </div>
      </div>
      <div class="layui-col-md4">
        <div class="layui-form-item">
          <label class="layui-form-label">Y轴</label>
          <div class="layui-input-block">
            <select name="y_axis" lay-verify="required">
              <option value=""></option>
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
        </div>
      </div>
      <div class="layui-col-md4">
        <div class="layui-form-item">
          <div class="layui-input-block">
            <button type="button" class="layui-btn axis_btn" style="padding: 0 100px;">确定</button>
          </div>
        </div>
      </div>
    </form>
    <!-- 图表显示区 -->
    <div id="graphic_show"></div>
  </div>
</div>
<script>
  var chartDom = document.getElementById('graphic_show');
  var myChart = echarts.init(chartDom);
  var option;

  option = {
    legend: {},
    tooltip: {},
    dataset: {
      source: [
        ['product', '2015', '2016', '2017'],
        ['Matcha Latte', 43.3, 85.8, 93.7],
        ['Milk Tea', 83.1, 73.4, 55.1],
        ['Cheese Cocoa', 86.4, 65.2, 82.5],
        ['Walnut Brownie', 72.4, 53.9, 39.1],
        ['Walnut Brwrownie', 22.4, 52.9, 39.1],
        ['Walnut', 62.4, 13.9, 19.1],
        ['rwwr Brownie', 32.4, 83.9, 39.1],
        ['Walnutwerw Brownie', 42.4, 23.9, 29.1],
      ]
    },
    xAxis: { type: 'category' },
    yAxis: {},
    // Declare several bar series, each will be mapped
    // to a column of dataset.source by default.
    series: [{ type: 'bar' }, { type: 'bar' }, { type: 'bar' }]
  };
  myChart.setOption(option);


  $('.axis_btn').click(function(){
    var x_axis;
    var y_axis;
    x_axis = $("select[name='x_axis']").val();
    y_axis = $("select[name='y_axis']").val();
    console.log(x_axis,y_axis);
    var datasets = {
      source:[
        ['product', '2015', '2016', '2017'],
        ['Matche', 43.3, 85.8, 93.7],
        ['Milk', 83.1, 73.4, 55.1]
      ]
    }
    option.dataset = datasets
    // console.log(option)
    myChart.setOption(option);

  })
</script>


<!-- 底部 -->
<div class="footer">
  <div class="layui-container">
    <div>
      <dl class="dl">
        <dt>关于</dt>
        <dd><a href="http://www.tafirt.org/about.html" target="_blank" rel="noopener noreferrer">关于我们</a></dd>
        <dd><a href="http://www.tafirt.org/coalize.html" target="_blank" rel="noopener noreferrer">加入我们</a></dd>
        <dd><a href="http://www.tafirt.org/contact.html" target="_blank" rel="noopener noreferrer">联系我们</a></dd>
      </dl>
      <dl class="dl">
        <dt>帮助</dt>
        <dd onclick="showmodel()">常见问题</dd>
        <dd onclick="showmodel()">API文档</dd>
      </dl>
      <dl class="dl">
        <dt>友情链接</dt>
        <dd><a href="http://www.ia.cas.cn/" target="_blank" rel="noopener noreferrer">中国科学院自动化研究所</a></dd>
        <dd><a href="http://www.ia.cas.cn/jgsz/kyxt/ZNGZ/" target="_blank" rel="noopener noreferrer">智能感知与计算研究中心</a></dd>
        <dd><a href="https://www.csc108.com/comOverView/introduce.jspx" target="_blank" rel="noopener noreferrer">中信建投证券</a></dd>
      </dl>
      <dl>
        <dt>关注我们</dt>
        <img src="../static/images/qrcode.png" alt="">
        <dd style="text-align: center">微信公众号</dd>
      </dl>
    </div>
  </div>
  <div style="clear: both;"></div>
  <p style="color: #000000;">@2022 津icp备15002249号-6</p>
</div>

<style>
  input,select{
    border: none;
  }
</style>
<!-- 弹框 -->
<div class="mask"></div>
<form class="model_f qr_login">
  <div class="model_logo">
    <img src="../static/images/logo.png" alt="">
    <span>TAFIRT</span>
  </div>
  <div class="model_title">
    验证码登录/注册
  </div>
  <div class="group">
    <select name="" id="sel" required>
      <option value="+86">+86</option>
      <option value="+86">中国+86</option>
      <option value="+86">中国香港特别行政区+852</option>
    </select>
    <input type="number" class="int iphone" required placeholder="手机号">
  </div>
  <div class="group">
    <input type="text" class="int graphical" required placeholder="获取验证码">
    <img src="" alt="">
  </div>
  <div class="group">
    <input type="text" class="int qrcode" required placeholder="验证码">
    <span>获取验证码</span>
  </div>
  <div class="group gologin">
    <button class="layui-btn layui-btn-fluid">登录</button><br/>
    <a href="javascript:;" class="" style="padding-bottom: 20px;" onclick="goreg()">密码登录 ></a>
  </div>
</form>

<form class="model_f pass_login">
  <div class="model_logo">
    <img src="../static/images/logo.png" alt="">
    <span>TAFIRT</span>
  </div>
  <div class="model_title">
    密码登录
  </div>
  <div class="group">
    <input type="number" class="int" required placeholder="手机/邮箱/用户名" style="width: 340px;">
  </div>
  <div class="group">
    <input type="password" class="int" required placeholder="密码" style="width: 340px;">
  </div>
  <div class="group">
    <input type="text" class="int qrcode" required placeholder="验证码">
    <img src="" alt="">
  </div>
  <div class="group gologin">
    <button class="layui-btn layui-btn-fluid">登录</button><br/>
    <a href="javascript:;" class="" style="padding-bottom: 20px;float: left;">忘记密码?</a>
    <a href="javascript:;" class="" style="padding-bottom: 20px;float: right;" onclick="gologin()">验证码登录/注册 ></a>
  </div>
</form>

</body>
<script>
layui.use(['util'],function(){
  var layer = layui.layer,
      util = layui.util,
      element = layui.element;
      laydate = layui.laydate;
    //返回顶部
    util.fixbar({
      bar1: false
      ,bar2: false
      ,css: {right: 10, bottom: 30}
      ,bgcolor: '#009688'
    });
});

$('.mask').click(function(){
  $('.pass_login,.qr_login').hide();
  $(this).hide();
})
function showmodel(){
  $('.qr_login,.mask').show();
}
function goreg(){
  $('.pass_login').show();
}
function gologin(){
  $('.pass_login').hide();
  $('.qr_login').show();
}
</script>
</html>